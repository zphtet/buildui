name: Deploy to Cloud Run (prod)

on:
  push:
    branches:
      - main

jobs:
  deploy:
    uses: ./.github/workflows/cicd.yml
    with:
      gcp-project-id: ${{ vars.GCP_PROJECT_ID }}
      gcp-region: ${{ vars.GCP_REGION || 'us-central1' }}
      service-name: ${{ vars.CLOUD_RUN_SERVICE_NAME_PROD || 'build-ui' }}
      artifact-registry-repo: ${{ vars.ARTIFACT_REGISTRY_REPO || 'buildui' }}
      environment: prod
    secrets:
      gcp-sa-key: ${{ secrets.GCP_SA_KEY }}

